//self-adjusting timer abstraction
		function doTimer(length, resolution, oninstance, oncomplete)
		{
			var steps = (length / 100) * (resolution / 10),
				speed = length / steps,
				count = 0,
				start = new Date().getTime();

			function instance()
			{
				if(count++ == steps)
				{
					oncomplete(steps, count);
				}
				else
				{
					oninstance(steps, count);

					var diff = (new Date().getTime() - start) - (count * speed);
					window.setTimeout(instance, (speed - diff));
				}
			}

			window.setTimeout(instance, speed);
		}


		//bind a submit handler to the sample form
		document.getElementById('sampleform').onsubmit = function()
		{
			//do the image fade
			var img = document.getElementById('image');

			var opacity = 1;
			img.style.opacity = opacity;

			doTimer(5000, 20, function(steps)
			{
				opacity = opacity - (1 / steps);
				img.style.opacity = opacity;
			},
			function()
			{
				img.style.opacity = 0;
			});

			//cancel the normal submit
			return false;
		};
